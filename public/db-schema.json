{
  "tables": [
    {"t":"blockchain_configs","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"provider","t":"character varying"},{"n":"api_key_encrypted","t":"text"},{"n":"settings","t":"json"},{"n":"is_active","t":"boolean"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"blockchain_uploads","c":[{"n":"id","t":"bigint"},{"n":"file_id","t":"bigint"},{"n":"provider","t":"character varying"},{"n":"ipfs_hash","t":"character varying"},{"n":"upload_status","t":"character varying"},{"n":"error_message","t":"text"},{"n":"upload_cost","t":"numeric"},{"n":"provider_response","t":"json"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"file_id","tt":"files","tc":"id"}]},{"t":"cache","c":[{"n":"key","t":"character varying"},{"n":"value","t":"text"},{"n":"expiration","t":"integer"}],"pk":["key"],"fk":[]},{"t":"cache_locks","c":[{"n":"key","t":"character varying"},{"n":"owner","t":"character varying"},{"n":"expiration","t":"integer"}],"pk":["key"],"fk":[]},{"t":"daily_activity_stats","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"date","t":"date"},{"n":"files_created","t":"integer"},{"n":"files_updated","t":"integer"},{"n":"files_deleted","t":"integer"},{"n":"files_accessed","t":"integer"},{"n":"login_count","t":"integer"},{"n":"storage_used_bytes","t":"bigint"},{"n":"bandwidth_used_bytes","t":"bigint"},{"n":"session_count","t":"integer"},{"n":"active_time_minutes","t":"integer"},{"n":"unique_files_accessed","t":"integer"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"dlp_scan_results","c":[{"n":"id","t":"bigint"},{"n":"file_id","t":"bigint"},{"n":"policy_id","t":"bigint"},{"n":"scan_type","t":"character varying"},{"n":"scan_status","t":"character varying"},{"n":"risk_score","t":"integer"},{"n":"risk_level","t":"character varying"},{"n":"detected_patterns","t":"json"},{"n":"detected_keywords","t":"json"},{"n":"confidence_score","t":"numeric"},{"n":"ai_classification","t":"character varying"},{"n":"ai_confidence","t":"numeric"},{"n":"ai_suggestions","t":"ARRAY"},{"n":"action_taken","t":"character varying"},{"n":"quarantine_reason","t":"text"},{"n":"reviewed_by_user_id","t":"bigint"},{"n":"reviewed_at","t":"timestamp without time zone"},{"n":"review_status","t":"character varying"},{"n":"review_notes","t":"text"},{"n":"scan_duration_ms","t":"integer"},{"n":"file_size_bytes","t":"bigint"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"policy_id","tt":"security_policies","tc":"id"},{"sc":"file_id","tt":"files","tc":"id"},{"sc":"reviewed_by_user_id","tt":"users","tc":"id"}]},{"t":"document_metadata","c":[{"n":"id","t":"text"},{"n":"title","t":"text"},{"n":"url","t":"text"},{"n":"created_at","t":"timestamp without time zone"},{"n":"schema","t":"text"},{"n":"user_id","t":"bigint"}],"pk":["id"],"fk":[]},{"t":"document_rows","c":[{"n":"id","t":"integer"},{"n":"dataset_id","t":"text"},{"n":"row_data","t":"jsonb"}],"pk":["id"],"fk":[{"sc":"dataset_id","tt":"document_metadata","tc":"id"}]},{"t":"documents","c":[{"n":"id","t":"bigint"},{"n":"content","t":"text"},{"n":"metadata","t":"jsonb"},{"n":"embedding","t":"USER-DEFINED"},{"n":"user_id","t":"bigint"}],"pk":["id"],"fk":[]},{"t":"failed_jobs","c":[{"n":"id","t":"bigint"},{"n":"uuid","t":"character varying"},{"n":"connection","t":"text"},{"n":"queue","t":"text"},{"n":"payload","t":"text"},{"n":"exception","t":"text"},{"n":"failed_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[]},{"t":"file_access_logs","c":[{"n":"id","t":"bigint"},{"n":"file_id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"session_id","t":"character varying"},{"n":"access_type","t":"character varying"},{"n":"access_method","t":"character varying"},{"n":"file_size_at_access","t":"bigint"},{"n":"file_version_at_access","t":"character varying"},{"n":"ip_address","t":"inet"},{"n":"user_agent","t":"text"},{"n":"referrer","t":"text"},{"n":"response_time_ms","t":"integer"},{"n":"bytes_transferred","t":"bigint"},{"n":"started_at","t":"timestamp without time zone"},{"n":"completed_at","t":"timestamp without time zone"},{"n":"duration_seconds","t":"integer"}],"pk":["id"],"fk":[{"sc":"session_id","tt":"user_sessions","tc":"session_id"},{"sc":"file_id","tt":"files","tc":"id"},{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"file_encryption","c":[{"n":"id","t":"bigint"},{"n":"file_id","t":"bigint"},{"n":"encryption_algorithm","t":"character varying"},{"n":"key_id","t":"character varying"},{"n":"iv_base64","t":"text"},{"n":"encrypted_by_user_id","t":"bigint"},{"n":"access_level","t":"character varying"},{"n":"key_rotation_count","t":"integer"},{"n":"last_key_rotation","t":"timestamp without time zone"},{"n":"next_key_rotation","t":"timestamp without time zone"},{"n":"decryption_count","t":"integer"},{"n":"last_decrypted_at","t":"timestamp without time zone"},{"n":"last_decrypted_by_user_id","t":"bigint"},{"n":"audit_trail","t":"json"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"last_decrypted_by_user_id","tt":"users","tc":"id"},{"sc":"file_id","tt":"files","tc":"id"},{"sc":"encrypted_by_user_id","tt":"users","tc":"id"}]},{"t":"files","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"file_name","t":"character varying"},{"n":"file_path","t":"character varying"},{"n":"file_size","t":"character varying"},{"n":"file_type","t":"character varying"},{"n":"mime_type","t":"character varying"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"},{"n":"parent_id","t":"bigint"},{"n":"is_folder","t":"boolean"},{"n":"deleted_at","t":"timestamp with time zone"},{"n":"blockchain_provider","t":"character varying"},{"n":"ipfs_hash","t":"character varying"},{"n":"blockchain_url","t":"text"},{"n":"is_blockchain_stored","t":"boolean"},{"n":"blockchain_metadata","t":"json"}],"pk":["id"],"fk":[{"sc":"parent_id","tt":"files","tc":"id"},{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"job_batches","c":[{"n":"id","t":"character varying"},{"n":"name","t":"character varying"},{"n":"total_jobs","t":"integer"},{"n":"pending_jobs","t":"integer"},{"n":"failed_jobs","t":"integer"},{"n":"failed_job_ids","t":"text"},{"n":"options","t":"text"},{"n":"cancelled_at","t":"integer"},{"n":"created_at","t":"integer"},{"n":"finished_at","t":"integer"}],"pk":["id"],"fk":[]},{"t":"jobs","c":[{"n":"id","t":"bigint"},{"n":"queue","t":"character varying"},{"n":"payload","t":"text"},{"n":"attempts","t":"smallint"},{"n":"reserved_at","t":"integer"},{"n":"available_at","t":"integer"},{"n":"created_at","t":"integer"}],"pk":["id"],"fk":[]},{"t":"migrations","c":[{"n":"id","t":"integer"},{"n":"migration","t":"character varying"},{"n":"batch","t":"integer"}],"pk":["id"],"fk":[]},{"t":"n8n_chat_histories","c":[{"n":"id","t":"integer"},{"n":"session_id","t":"character varying"},{"n":"message","t":"jsonb"}],"pk":["id"],"fk":[]},{"t":"password_reset_tokens","c":[{"n":"email","t":"character varying"},{"n":"token","t":"character varying"},{"n":"created_at","t":"timestamp without time zone"}],"pk":["email"],"fk":[]},{"t":"personal_access_tokens","c":[{"n":"id","t":"bigint"},{"n":"tokenable_type","t":"character varying"},{"n":"tokenable_id","t":"bigint"},{"n":"name","t":"character varying"},{"n":"token","t":"character varying"},{"n":"abilities","t":"text"},{"n":"last_used_at","t":"timestamp without time zone"},{"n":"expires_at","t":"timestamp without time zone"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[]},{"t":"saved_searches","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"name","t":"character varying"},{"n":"query","t":"character varying"},{"n":"filters","t":"jsonb"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"search_logs","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"query","t":"character varying"},{"n":"filters","t":"jsonb"},{"n":"results_count","t":"integer"},{"n":"response_time_ms","t":"integer"},{"n":"timestamp","t":"timestamp without time zone"},{"n":"ip_address","t":"inet"},{"n":"user_agent","t":"text"},{"n":"endpoint","t":"character varying"},{"n":"resolved","t":"boolean"},{"n":"resolved_by","t":"bigint"},{"n":"resolved_at","t":"timestamp without time zone"},{"n":"resolution_notes","t":"text"},{"n":"created_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"user_id","tt":"users","tc":"id"},{"sc":"resolved_by","tt":"users","tc":"id"}]},{"t":"security_metrics","c":[{"n":"id","t":"bigint"},{"n":"metric_date","t":"date"},{"n":"metric_hour","t":"integer"},{"n":"active_users","t":"integer"},{"n":"new_logins","t":"integer"},{"n":"failed_logins","t":"integer"},{"n":"suspicious_logins","t":"integer"},{"n":"files_uploaded","t":"integer"},{"n":"files_downloaded","t":"integer"},{"n":"files_encrypted","t":"integer"},{"n":"security_violations","t":"integer"},{"n":"dlp_triggers","t":"integer"},{"n":"access_denied","t":"integer"},{"n":"device_approvals","t":"integer"},{"n":"avg_login_time_ms","t":"integer"},{"n":"avg_file_scan_time_ms","t":"integer"},{"n":"system_load_avg","t":"numeric"},{"n":"created_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[]},{"t":"security_policies","c":[{"n":"id","t":"bigint"},{"n":"name","t":"character varying"},{"n":"description","t":"text"},{"n":"scope","t":"character varying"},{"n":"scope_id","t":"bigint"},{"n":"ip_whitelist","t":"ARRAY"},{"n":"ip_blacklist","t":"ARRAY"},{"n":"allowed_countries","t":"ARRAY"},{"n":"blocked_countries","t":"ARRAY"},{"n":"access_schedule","t":"json"},{"n":"timezone","t":"character varying"},{"n":"require_2fa","t":"boolean"},{"n":"require_device_approval","t":"boolean"},{"n":"max_concurrent_sessions","t":"integer"},{"n":"session_timeout_minutes","t":"integer"},{"n":"allow_download","t":"boolean"},{"n":"allow_copy","t":"boolean"},{"n":"allow_print","t":"boolean"},{"n":"allow_screenshot","t":"boolean"},{"n":"watermark_enabled","t":"boolean"},{"n":"watermark_text","t":"character varying"},{"n":"dlp_enabled","t":"boolean"},{"n":"dlp_patterns","t":"ARRAY"},{"n":"dlp_keywords","t":"ARRAY"},{"n":"dlp_action","t":"character varying"},{"n":"encryption_required","t":"boolean"},{"n":"encryption_algorithm","t":"character varying"},{"n":"key_rotation_days","t":"integer"},{"n":"audit_level","t":"character varying"},{"n":"retention_days","t":"integer"},{"n":"is_active","t":"boolean"},{"n":"enforced_at","t":"timestamp without time zone"},{"n":"created_by_user_id","t":"bigint"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"created_by_user_id","tt":"users","tc":"id"}]},{"t":"security_violations","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"policy_id","t":"bigint"},{"n":"file_id","t":"bigint"},{"n":"violation_type","t":"character varying"},{"n":"violation_category","t":"character varying"},{"n":"severity","t":"character varying"},{"n":"description","t":"text"},{"n":"details","t":"json"},{"n":"ip_address","t":"inet"},{"n":"user_agent","t":"text"},{"n":"location_country","t":"character varying"},{"n":"location_city","t":"character varying"},{"n":"device_fingerprint","t":"character varying"},{"n":"status","t":"character varying"},{"n":"resolved_by_user_id","t":"bigint"},{"n":"resolved_at","t":"timestamp without time zone"},{"n":"resolution_notes","t":"text"},{"n":"auto_action_taken","t":"character varying"},{"n":"created_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"policy_id","tt":"security_policies","tc":"id"},{"sc":"resolved_by_user_id","tt":"users","tc":"id"},{"sc":"user_id","tt":"users","tc":"id"},{"sc":"file_id","tt":"files","tc":"id"}]},{"t":"sessions","c":[{"n":"id","t":"character varying"},{"n":"user_id","t":"bigint"},{"n":"ip_address","t":"character varying"},{"n":"user_agent","t":"text"},{"n":"payload","t":"text"},{"n":"last_activity","t":"integer"}],"pk":["id"],"fk":[]},{"t":"system_activities","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"file_id","t":"bigint"},{"n":"target_user_id","t":"bigint"},{"n":"activity_type","t":"character varying"},{"n":"action","t":"character varying"},{"n":"entity_type","t":"character varying"},{"n":"entity_id","t":"bigint"},{"n":"description","t":"text"},{"n":"metadata","t":"jsonb"},{"n":"ip_address","t":"inet"},{"n":"user_agent","t":"text"},{"n":"session_id","t":"character varying"},{"n":"location_country","t":"character varying"},{"n":"location_city","t":"character varying"},{"n":"device_type","t":"character varying"},{"n":"browser","t":"character varying"},{"n":"risk_level","t":"character varying"},{"n":"requires_audit","t":"boolean"},{"n":"is_suspicious","t":"boolean"},{"n":"created_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"file_id","tt":"files","tc":"id"},{"sc":"target_user_id","tt":"users","tc":"id"},{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"trusted_devices","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"device_name","t":"character varying"},{"n":"device_fingerprint","t":"character varying"},{"n":"device_type","t":"character varying"},{"n":"os_info","t":"character varying"},{"n":"browser_info","t":"character varying"},{"n":"trusted_at","t":"timestamp without time zone"},{"n":"trusted_by_user_id","t":"bigint"},{"n":"trust_level","t":"character varying"},{"n":"access_restrictions","t":"json"},{"n":"last_used_at","t":"timestamp without time zone"},{"n":"last_ip_address","t":"inet"},{"n":"last_location_country","t":"character varying"},{"n":"last_location_city","t":"character varying"},{"n":"is_active","t":"boolean"},{"n":"revoked_at","t":"timestamp without time zone"},{"n":"revoked_by_user_id","t":"bigint"},{"n":"revocation_reason","t":"character varying"},{"n":"auto_approved","t":"boolean"},{"n":"expires_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"trusted_by_user_id","tt":"users","tc":"id"},{"sc":"revoked_by_user_id","tt":"users","tc":"id"},{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"user_sessions","c":[{"n":"id","t":"bigint"},{"n":"user_id","t":"bigint"},{"n":"session_id","t":"character varying"},{"n":"ip_address","t":"inet"},{"n":"user_agent","t":"text"},{"n":"device_fingerprint","t":"text"},{"n":"location_country","t":"character varying"},{"n":"location_city","t":"character varying"},{"n":"location_timezone","t":"character varying"},{"n":"is_active","t":"boolean"},{"n":"last_activity_at","t":"timestamp without time zone"},{"n":"login_method","t":"character varying"},{"n":"is_suspicious","t":"boolean"},{"n":"trusted_device","t":"boolean"},{"n":"created_at","t":"timestamp without time zone"},{"n":"expires_at","t":"timestamp without time zone"},{"n":"logged_out_at","t":"timestamp without time zone"}],"pk":["id"],"fk":[{"sc":"user_id","tt":"users","tc":"id"}]},{"t":"users","c":[{"n":"id","t":"bigint"},{"n":"name","t":"character varying"},{"n":"email","t":"character varying"},{"n":"email_verified_at","t":"timestamp without time zone"},{"n":"password","t":"character varying"},{"n":"remember_token","t":"character varying"},{"n":"created_at","t":"timestamp without time zone"},{"n":"updated_at","t":"timestamp without time zone"},{"n":"two_factor_secret","t":"text"},{"n":"two_factor_recovery_codes","t":"text"},{"n":"two_factor_confirmed_at","t":"timestamp without time zone"},{"n":"is_approved","t":"boolean"},{"n":"role","t":"character varying"},{"n":"is_premium","t":"boolean"},{"n":"current_team_id","t":"bigint"},{"n":"profile_photo_path","t":"character varying"}],"pk":["id"],"fk":[]},{"t":"webauthn_credentials","c":[{"n":"id","t":"text"},{"n":"raw_id","t":"text"},{"n":"response","t":"jsonb"},{"n":"type","t":"character varying"},{"n":"transports","t":"ARRAY"},{"n":"attestation_type","t":"character varying"},{"n":"trust_path","t":"jsonb"},{"n":"aaguid","t":"uuid"},{"n":"public_key","t":"text"},{"n":"counter","t":"bigint"},{"n":"user_handle","t":"text"},{"n":"user_id","t":"text"},{"n":"authenticatable_type","t":"character varying"},{"n":"authenticatable_id","t":"bigint"},{"n":"disabled_at","t":"timestamp with time zone"},{"n":"created_at","t":"timestamp with time zone"},{"n":"updated_at","t":"timestamp with time zone"},{"n":"rp_id","t":"text"},{"n":"origin","t":"text"},{"n":"alias","t":"character varying"},{"n":"attestation_format","t":"character varying"}],"pk":["id"],"fk":[]}
  ]
}
